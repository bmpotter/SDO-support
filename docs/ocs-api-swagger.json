{
  "swagger": "2.0",
  "info": {
    "description": "[Intel SDO](https://software.intel.com/en-us/secure-device-onboard) (Secure Device Onboard) is a technology that is created by Intel to make it easy and secure to configure edge devices and associate them with an IEAM instance. IEAM has added support for SDO-enabled devices so that the agent will be installed on the device and registered to the IEAM management hub with zero touch (by simply powering on the device).<br><br>Examples of using this API:<br><br>`curl -sS $HZN_SDO_SVC_URL/version && echo`<br>`curl -sS -w %{http_code} -u $HZN_ORG_ID/$HZN_EXCHANGE_USER_AUTH $HZN_SDO_SVC_URL/vouchers | jq`<br><br>Note: Some of these APIs can also be run via the `hzn` command.",
    "version": "1.10",
    "title": "IEAM Support for SDO",
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "schemes": [
    "https"
  ],
  "paths": {
    "/version": {
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get SDO Owner Services version",
        "description": "Note: This API does not require credentials.",
        "operationId": "getVersion",
        "produces": [
          "application/text"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Version"
            }
          }
        }
      }
    },
    "/vouchers": {
      "post": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Import a voucher into the management hub",
        "description": "",
        "operationId": "importVoucher",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Voucher to be imported",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Voucher"
            }
          },
          {
            "in": "query",
            "name": "orgid",
            "type": "string",
            "description": "(optional) The org id that the device should be created in. (Defaults to the org of the credentials.)"
          }
        ],
        "responses": {
          "201": {
            "description": "Voucher imported"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          },
          "500": {
            "description": "Error importing voucher"
          }
        }
      },
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get list of imported voucher IDs",
        "description": "",
        "operationId": "getVouchers",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "orgid",
            "type": "string",
            "description": "(optional) Return devices that are in this org. (Defaults to the org of the credentials.)"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/VoucherIdList"
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          }
        }
      }
    },
    "/orgs/{org-id}/vouchers": {
      "post": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Import a voucher into the management hub",
        "description": "",
        "operationId": "importVoucher",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "org-id",
            "in": "path",
            "description": "org ID of the voucher you are importing",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Voucher to be imported",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Voucher"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Voucher imported"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          },
          "500": {
            "description": "Error importing voucher"
          }
        }
      },
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get list of imported voucher IDs",
        "description": "",
        "operationId": "getVouchers",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "org-id",
            "in": "path",
            "description": "org ID of the vouchers you want",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/VoucherIdList"
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          }
        }
      }
    },
    "/vouchers/{device-id}": {
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get one imported voucher",
        "description": "",
        "operationId": "getVoucher",
        "parameters": [
          {
            "name": "device-id",
            "in": "path",
            "description": "ID of the device you want the voucher for",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "orgid",
            "type": "string",
            "description": "(optional) Return the device that is in this org. (Defaults to the org of the credentials.)"
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Voucher"
            }
          },
          "400": {
            "description": "Invalid voucher id"
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          }
        }
      }
    },
    "/orgs/{org-id}/vouchers/{device-id}": {
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get one imported voucher",
        "description": "",
        "operationId": "getVoucher",
        "parameters": [
          {
            "name": "org-id",
            "in": "path",
            "description": "org ID of the device you want the voucher for",
            "required": true,
            "type": "string"
          },
          {
            "name": "device-id",
            "in": "path",
            "description": "ID of the device you want the voucher for",
            "required": true,
            "type": "string"
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/Voucher"
            }
          },
          "400": {
            "description": "Invalid voucher id"
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          }
        }
      }
    },
    "/orgs/{org-id}/keys": {
      "post": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Create an owner key pair in the management hub and return the public keys",
        "description": "",
        "operationId": "importKeys",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/octet-stream"
        ],
        "parameters": [
          {
            "name": "org-id",
            "in": "path",
            "description": "org ID of the vouchers you want",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Certificate input values. See https://www.globalsign.com/en/blog/what-is-a-certificate-signing-request-csr",
            "required": true,
            "schema": {
              "$ref": "#/definitions/KeysCertInput"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Keys created",
            "schema": {
              "$ref": "#/definitions/PublicKeyFile"
            }
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          },
          "500": {
            "description": "Error importing keys"
          }
        }
      },
      "get": {
        "tags": [
          "OCS-API"
        ],
        "summary": "Get list of owner public keys",
        "description": "",
        "operationId": "getKeys",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "org-id",
            "in": "path",
            "description": "org ID of the public keys you want",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/PublicKeyList"
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Permission denied"
          }
        }
      }
    }
  },
  "/orgs/{org-id}/keys/{key-name}": {
    "get": {
      "tags": [
        "OCS-API"
      ],
      "summary": "Get one public key",
      "description": "",
      "operationId": "getPublicKey",
      "parameters": [
        {
          "name": "org-id",
          "in": "path",
          "description": "org ID of the public key you want",
          "required": true,
          "type": "string"
        },
        {
          "name": "key-name",
          "in": "path",
          "description": "name of key you want (not the full file name)",
          "required": true,
          "type": "string"
        }
      ],
      "produces": [
        "application/octet-stream"
      ],
      "responses": {
        "200": {
          "description": "successful operation",
          "schema": {
            "$ref": "#/definitions/PublicKeyFile"
          }
        },
        "400": {
          "description": "Invalid key name"
        },
        "401": {
          "description": "Invalid credentials"
        },
        "403": {
          "description": "Permission denied"
        }
      }
    },
    "delete": {
      "tags": [
        "OCS-API"
      ],
      "summary": "Delete one key pair",
      "description": "",
      "operationId": "deleteKeyPair",
      "parameters": [
        {
          "name": "org-id",
          "in": "path",
          "description": "org ID of the key pair you want to delete",
          "required": true,
          "type": "string"
        },
        {
          "name": "key-name",
          "in": "path",
          "description": "name of key you want to delete (not the full file name)",
          "required": true,
          "type": "string"
        }
      ],
      "responses": {
        "204": {
          "description": "successful operation"
        },
        "400": {
          "description": "Invalid key name"
        },
        "401": {
          "description": "Invalid credentials"
        },
        "403": {
          "description": "Permission denied"
        }
      }
    }
  },
  "definitions": {
    "Version": {
      "type": "string"
    },
    "Voucher": {
      "type": "object",
      "properties": {
        "sz": {
          "type": "integer",
          "format": "int32"
        },
        "oh": {
          "type": "object",
          "properties": {
            "pv": {
              "type": "integer",
              "format": "int32"
            },
            "pe": {
              "type": "integer",
              "format": "int32"
            },
            "r": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "g": {
              "type": "string",
              "description": "base64 encoded"
            },
            "d": {
              "type": "string"
            },
            "pk": {
              "type": "array",
              "items": {
                "type": "object"
              }
            }
          }
        },
        "hmac": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "en": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      },
      "xml": {
        "name": "Voucher"
      }
    },
    "VoucherIdList": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "voucher device id"
      }
    },
    "KeysCertInput": {
      "type": "object",
      "properties": {
        "key_name": {
          "type": "string"
        },
        "common_name": {
          "type": "string"
        },
        "email_name": {
          "type": "string"
        },
        "company_name": {
          "type": "string"
        },
        "country_name": {
          "type": "string"
        },
        "state_name": {
          "type": "string"
        },
        "locale_name": {
          "type": "string"
        }
      }
    },
    "PublicKeyFile": {
      "type": "string"
    },
    "PublicKeyList": {
      "type": "object",
      "properties": {
        "<user>": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "public key file name"
          }
        }
      }
    }
  }
}
